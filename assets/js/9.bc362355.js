(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{212:function(t,a,e){"use strict";e.r(a);var s=e(0),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"smartquery"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#smartquery"}},[t._v("#")]),t._v(" SmartQuery")]),t._v(" "),e("p",[t._v("There are two ways how you can create smart queries: declaratively through the "),e("code",[t._v("jsonapi")]),t._v(" option or imperatively with "),e("code",[t._v("$jsonapi")]),t._v(" helper. The first approach works for most cases.")]),t._v(" "),e("div",{staticClass:"language-vue extra-class"},[e("pre",{pre:!0,attrs:{class:"language-vue"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("My component"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),e("span",{pre:!0,attrs:{class:"token script"}},[e("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// default value for myAwesomeQuery")]),t._v("\n      myAwesomeQuery"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// default value for myDynamicQuery")]),t._v("\n      myDynamicQuery"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  jsonapi"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    myAwesomeQuery"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// options here")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  methods"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("dynamicallyAddSmartQuery")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$jsonapi"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("addQuery")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myDynamicQuery'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// options here")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("For more information about usage read "),e("router-link",{attrs:{to:"/guide/basic-usage/fetching-data.html"}},[t._v("Fetching Data")]),t._v(" chapter.")],1)]),t._v(" "),e("h2",{attrs:{id:"accessing-query"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#accessing-query"}},[t._v("#")]),t._v(" Accessing query")]),t._v(" "),e("p",[t._v("Each query registered in component is accessible in "),e("router-link",{attrs:{to:"/api/dollar-jsonapi.html#queries"}},[e("code",[t._v("$jsonapi.queries")]),t._v(" property")]),t._v(" under its name, e.g.:")],1),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$jsonapi"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queries"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("myAwesomeQuery\n")])])]),e("h2",{attrs:{id:"options"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#options"}},[t._v("#")]),t._v(" Options")]),t._v(" "),e("h3",{attrs:{id:"config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#config"}},[t._v("#")]),t._v(" "),e("code",[t._v("config")])]),t._v(" "),e("ul",[e("li",[t._v("Type: "),e("code",[t._v("AxiosRequestConfig | (variables: any) => AxiosRequestConfig")])])]),t._v(" "),e("p",[t._v("Endpoint config for api client.")]),t._v(" "),e("h3",{attrs:{id:"error-optional"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#error-optional"}},[t._v("#")]),t._v(" "),e("code",[t._v("error")]),t._v(" (optional)")]),t._v(" "),e("ul",[e("li",[t._v("Type: "),e("code",[t._v("(e: AxiosError) => undefined | { data: any }")])])]),t._v(" "),e("p",[t._v("Custom error handling. If object of type "),e("code",[t._v("{ data: any }")]),t._v(" is returned from this function, its "),e("code",[t._v("data")]),t._v(" property will be used as a query result. In other case query result won't change. It is called in the context of vue instance so you can access "),e("code",[t._v("this")]),t._v(" inside.")]),t._v(" "),e("h3",{attrs:{id:"fetchpolicy-optional"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fetchpolicy-optional"}},[t._v("#")]),t._v(" "),e("code",[t._v("fetchPolicy")]),t._v(" (optional)")]),t._v(" "),e("ul",[e("li",[t._v("Type: "),e("code",[t._v("'network-only' | 'cache-and-network' | 'cache-first' | 'cache-only' | 'no-cache'")])]),t._v(" "),e("li",[t._v("default: "),e("code",[t._v("'network-only'")])])]),t._v(" "),e("p",[t._v("Check "),e("router-link",{attrs:{to:"/guide/basic-usage/fetching-data.html#fetch-policies"}},[t._v("Fetch Policies")]),t._v(" section for more info.")],1),t._v(" "),e("h3",{attrs:{id:"pollinterval-optional"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pollinterval-optional"}},[t._v("#")]),t._v(" "),e("code",[t._v("pollInterval")]),t._v(" (optional)")]),t._v(" "),e("ul",[e("li",[t._v("Type: "),e("code",[t._v("number")])])]),t._v(" "),e("p",[t._v("Poll interval in miliseconds.")]),t._v(" "),e("p",[t._v("Check "),e("router-link",{attrs:{to:"/guide/basic-usage/fetching-data.html#polling"}},[t._v("Polling")]),t._v(" section for more info.")],1),t._v(" "),e("h3",{attrs:{id:"skip-optional"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#skip-optional"}},[t._v("#")]),t._v(" "),e("code",[t._v("skip")]),t._v(" (optional)")]),t._v(" "),e("ul",[e("li",[t._v("Type: "),e("code",[t._v("boolean | () => boolean")])])]),t._v(" "),e("p",[t._v("Check "),e("router-link",{attrs:{to:"/guide/basic-usage/fetching-data.html#skipping-the-query"}},[t._v("Skipping the query")]),t._v(" section for more info.")],1),t._v(" "),e("h3",{attrs:{id:"update-optional"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#update-optional"}},[t._v("#")]),t._v(" "),e("code",[t._v("update")]),t._v(" (optional)")]),t._v(" "),e("ul",[e("li",[t._v("Type: "),e("code",[t._v("(data: NormalizedJsonapiResource, req: CacheRequestInfo) => any")])])]),t._v(" "),e("p",[t._v("Function used to modify/format data fetched from api before saving in a component data. It has also access to cached request info that contains raw api response.")]),t._v(" "),e("h3",{attrs:{id:"variables-optional"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#variables-optional"}},[t._v("#")]),t._v(" "),e("code",[t._v("variables")]),t._v(" (optional)")]),t._v(" "),e("ul",[e("li",[t._v("Type: "),e("code",[t._v("object | () => object")])])]),t._v(" "),e("p",[t._v("Parameters passed to "),e("code",[t._v("config")]),t._v(".")]),t._v(" "),e("p",[t._v("Check "),e("router-link",{attrs:{to:"/guide/basic-usage/fetching-data.html#query-with-parameters"}},[t._v("Query with parameters")]),t._v(" section for more info.")],1),t._v(" "),e("h2",{attrs:{id:"properties"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#properties"}},[t._v("#")]),t._v(" Properties")]),t._v(" "),e("h3",{attrs:{id:"hasmore"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hasmore"}},[t._v("#")]),t._v(" "),e("code",[t._v("hasMore")])]),t._v(" "),e("ul",[e("li",[t._v("Type: "),e("code",[t._v("boolean")])])]),t._v(" "),e("p",[t._v("Indicates whether there is next page to fetch.")]),t._v(" "),e("p",[t._v("See also "),e("a",{attrs:{href:"#fetchmore"}},[e("code",[t._v("fetchMore")]),t._v(" method")]),t._v(" and "),e("router-link",{attrs:{to:"/guide/basic-usage/fetching-data.html#pagination"}},[t._v("Pagination")]),t._v(" section.")],1),t._v(" "),e("h3",{attrs:{id:"loading"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#loading"}},[t._v("#")]),t._v(" "),e("code",[t._v("loading")])]),t._v(" "),e("ul",[e("li",[t._v("Type: "),e("code",[t._v("boolean")])])]),t._v(" "),e("p",[t._v("Indicates whether request is in progress.")]),t._v(" "),e("h3",{attrs:{id:"request"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#request"}},[t._v("#")]),t._v(" "),e("code",[t._v("request")])]),t._v(" "),e("ul",[e("li",[t._v("Type: "),e("code",[t._v("CacheRequestInfo")])])]),t._v(" "),e("h3",{attrs:{id:"status"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#status"}},[t._v("#")]),t._v(" "),e("code",[t._v("status")])]),t._v(" "),e("ul",[e("li",[t._v("Type: "),e("code",[t._v("'idle' | 'pending' | 'success' | 'error'")])])]),t._v(" "),e("p",[t._v("Indicates current status of the request:")]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("status === 'idle'")])]),t._v(" "),e("p",[t._v("Request to API wasn't triggered at all - it can happen if request is skipped or data from cached is preferred according to fetch policy (e.g. "),e("code",[t._v("cache-only")]),t._v(").")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("status === 'pending'")])]),t._v(" "),e("p",[t._v("Request has been sent, but api has not yet responded.")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("status === 'success'")])]),t._v(" "),e("p",[t._v("Request has been sent and api has responded with success.")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("status === 'error'")])]),t._v(" "),e("p",[t._v("Request has been sent but ended up with an error.")])])]),t._v(" "),e("h2",{attrs:{id:"methods"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#methods"}},[t._v("#")]),t._v(" Methods")]),t._v(" "),e("h3",{attrs:{id:"fetchmore"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fetchmore"}},[t._v("#")]),t._v(" fetchMore()")]),t._v(" "),e("p",[t._v("Fetches next page according to "),e("code",[t._v("next")]),t._v(" link from last request response.")]),t._v(" "),e("p",[t._v("See also "),e("a",{attrs:{href:"#hasmore"}},[e("code",[t._v("hasMore")]),t._v(" property")]),t._v(" and "),e("router-link",{attrs:{to:"/guide/basic-usage/fetching-data.html#pagination"}},[t._v("Pagination")]),t._v(" section.")],1),t._v(" "),e("h3",{attrs:{id:"refetch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#refetch"}},[t._v("#")]),t._v(" refetch()")]),t._v(" "),e("p",[t._v("Repeats (or performs) a request if it's not skipped.")]),t._v(" "),e("p",[t._v("Check "),e("router-link",{attrs:{to:"/guide/basic-usage/fetching-data.html#refetching-data"}},[t._v("Refetching data")]),t._v(" section for more info.")],1)])}),[],!1,null,null,null);a.default=n.exports}}]);