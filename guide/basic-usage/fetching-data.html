<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Fetching Data | Vue JSON:API</title>
    <meta name="description" content="Painless integration with well formatted API">
    <link rel="apple-touch-icon" sizes="180x180" href="/vue-jsonapi/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/vue-jsonapi/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/vue-jsonapi/favicon-16x16.png">
  <link rel="manifest" href="/vue-jsonapi/site.webmanifest">
  <link rel="shortcut icon" href="/vue-jsonapi/favicon.ico">
  <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/vue-jsonapi/assets/css/0.styles.8f0be543.css" as="style"><link rel="preload" href="/vue-jsonapi/assets/js/app.59b38989.js" as="script"><link rel="preload" href="/vue-jsonapi/assets/js/2.78fe1a10.js" as="script"><link rel="preload" href="/vue-jsonapi/assets/js/13.c407495b.js" as="script"><link rel="prefetch" href="/vue-jsonapi/assets/js/10.0084c6e0.js"><link rel="prefetch" href="/vue-jsonapi/assets/js/11.bd9ce70f.js"><link rel="prefetch" href="/vue-jsonapi/assets/js/12.db31304b.js"><link rel="prefetch" href="/vue-jsonapi/assets/js/14.af4ac3f2.js"><link rel="prefetch" href="/vue-jsonapi/assets/js/15.358bd703.js"><link rel="prefetch" href="/vue-jsonapi/assets/js/16.3a30e8cb.js"><link rel="prefetch" href="/vue-jsonapi/assets/js/17.b8cf17b9.js"><link rel="prefetch" href="/vue-jsonapi/assets/js/3.565cd9b9.js"><link rel="prefetch" href="/vue-jsonapi/assets/js/4.6b1b1ab7.js"><link rel="prefetch" href="/vue-jsonapi/assets/js/5.f9c52b6a.js"><link rel="prefetch" href="/vue-jsonapi/assets/js/6.583f5c73.js"><link rel="prefetch" href="/vue-jsonapi/assets/js/7.5c986e57.js"><link rel="prefetch" href="/vue-jsonapi/assets/js/8.307599d1.js"><link rel="prefetch" href="/vue-jsonapi/assets/js/9.bc362355.js">
    <link rel="stylesheet" href="/vue-jsonapi/assets/css/0.styles.8f0be543.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue-jsonapi/" class="home-link router-link-active"><img src="/vue-jsonapi/logo.png" alt="Vue JSON:API" class="logo"> <span class="site-name can-hide">Vue JSON:API</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-jsonapi/" class="nav-link">Home</a></div><div class="nav-item"><a href="/vue-jsonapi/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/vue-jsonapi/api/" class="nav-link">API Reference</a></div><div class="nav-item"><a href="https://github.com/rossinek/vue-jsonapi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vue-jsonapi/" class="nav-link">Home</a></div><div class="nav-item"><a href="/vue-jsonapi/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/vue-jsonapi/api/" class="nav-link">API Reference</a></div><div class="nav-item"><a href="https://github.com/rossinek/vue-jsonapi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/vue-jsonapi/guide/" class="sidebar-link">About</a></li><li><a href="/vue-jsonapi/guide/installation.html" class="sidebar-link">Installation</a></li><li><a href="/vue-jsonapi/guide/normalization.html" class="sidebar-link">Normalized Data</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Basic usage</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue-jsonapi/guide/basic-usage/" class="sidebar-link">Introduction</a></li><li><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html" class="active sidebar-link">Fetching Data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html#simple-query" class="sidebar-link">Simple query</a></li><li class="sidebar-sub-header"><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html#query-with-parameters" class="sidebar-link">Query with parameters</a></li><li class="sidebar-sub-header"><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html#loading-state" class="sidebar-link">Loading state</a></li><li class="sidebar-sub-header"><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html#skipping-the-query" class="sidebar-link">Skipping the query</a></li><li class="sidebar-sub-header"><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html#fetch-policies" class="sidebar-link">Fetch policies</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html#why-should-i-care" class="sidebar-link">Why should I care?</a></li><li class="sidebar-sub-header"><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html#what-are-the-options" class="sidebar-link">What are the options?</a></li><li class="sidebar-sub-header"><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html#how-to-use-it" class="sidebar-link">How to use it?</a></li></ul></li><li class="sidebar-sub-header"><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html#polling" class="sidebar-link">Polling</a></li><li class="sidebar-sub-header"><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html#refetching-data" class="sidebar-link">Refetching data</a></li><li class="sidebar-sub-header"><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html#error-handling" class="sidebar-link">Error handling</a></li><li class="sidebar-sub-header"><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html#pagination" class="sidebar-link">Pagination</a></li><li class="sidebar-sub-header"><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html#manual-query" class="sidebar-link">Manual query</a></li><li class="sidebar-sub-header"><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html#outside-a-component" class="sidebar-link">Outside a component</a></li><li class="sidebar-sub-header"><a href="/vue-jsonapi/guide/basic-usage/fetching-data.html#advanced-options" class="sidebar-link">Advanced options</a></li></ul></li><li><a href="/vue-jsonapi/guide/basic-usage/creating-updating-deleting-data.html" class="sidebar-link">Creating, Updating, Deleting Data</a></li></ul></section></li><li><a href="/vue-jsonapi/guide/good-practices.html" class="sidebar-link">Good practices</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="fetching-data"><a href="#fetching-data" class="header-anchor">#</a> Fetching Data</h1> <p>To make the most of this integration, it's worth to make your requests in declarative way. To declare JSON:API queries in your vue component use special <code>jsonapi</code> option.</p> <h2 id="simple-query"><a href="#simple-query" class="header-anchor">#</a> Simple query</h2> <p>Let assume that there is an endpoint <code>GET /hello</code> that responds with the following resource:</p> <div class="language- extra-class"><pre class="language-text"><code>GET /hello
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;greeting&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello world!&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>To get this resource in your application declare it in your vue component:</p> <div class="language-js extra-class"><pre class="language-js"><code>jsonapi<span class="token operator">:</span> <span class="token punctuation">{</span>
  hello<span class="token operator">:</span> <span class="token punctuation">{</span>
    config<span class="token operator">:</span> <span class="token punctuation">{</span> method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span> url<span class="token operator">:</span> <span class="token string">'/hello'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Note that <code>config</code> option is just a configuration object for api client (axios syntax). In real life application you'll rather extract such configs to separate file (learn more about <a href="/guide/good-practices">good practices</a>).</p></div> <p>Initialize the property in your vue component's data hook, which will be fed with the normalized response from JSON:API:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    hello<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>Full example:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    Message from API: {{ hello.message }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      hello<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  jsonapi<span class="token operator">:</span> <span class="token punctuation">{</span>
    hello<span class="token operator">:</span> <span class="token punctuation">{</span>
      config<span class="token operator">:</span> <span class="token punctuation">{</span> method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span> url<span class="token operator">:</span> <span class="token string">'/hello'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="query-with-parameters"><a href="#query-with-parameters" class="header-anchor">#</a> Query with parameters</h2> <p>Sometimes a request need to be parametrized. I some cases you might want to reuse the request config in different places, in other cases you might want to adjust the request according to user input. To achieve those goals you can define <code>config</code> as a function that gets all needed parameters and returns config object. Use <code>variables</code> property to define parameters for a config.</p> <p>You can pass <code>variables</code> as a static object but in most cases you might want to make them dynamic. To make it possible simply define <code>variables</code> as a function. It is called in the context of vue instance so you can access <code>this</code> inside.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>To be able to access <code>this</code> while computing <code>variables</code> make sure that this function is not bound to other context (e.g. don't define it as arrow function).</p></div> <div class="language-vue extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br></div><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model.lazy</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>What's your name?<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      Message from API: {{ hello.message }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      value<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      hello<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  jsonapi<span class="token operator">:</span> <span class="token punctuation">{</span>
    hello<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">config</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/hello?name=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function">variables</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Parameters are reactive. It means that query keep tracks of <code>variables</code> changes. Each time parameters are changed, new request is made to the API.</p></div> <h2 id="loading-state"><a href="#loading-state" class="header-anchor">#</a> Loading state</h2> <p>You can easily check if any of queries inside components are pending by <code>$jsonapi.loading</code> property:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$jsonapi.loading<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Loading...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>You can also check each query separately, e.g. <code>hello</code> query:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$jsonapi.queries.hello.loading<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Loading...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="skipping-the-query"><a href="#skipping-the-query" class="header-anchor">#</a> Skipping the query</h2> <p>There are many cases when you might want to disable the query e.g you don't have all needed parameters yet or you want to implement lazy loading functionality. To make it possible use the <code>skip</code> option:</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code>jsonapi<span class="token operator">:</span> <span class="token punctuation">{</span>
  hello<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">config</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/hello?name=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">variables</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Disable the query if name is shorter than 2 characters</span>
    <span class="token function">skip</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="fetch-policies"><a href="#fetch-policies" class="header-anchor">#</a> Fetch policies</h2> <p>This integration uses a cache under the hood. One of its most important role is to limit used memory for responses – each resource is stored once. Besides the resources the cache also stores requests made to api together with information about what was included in the response. We can make use of this information using different <em>fetch policies</em>.</p> <h3 id="why-should-i-care"><a href="#why-should-i-care" class="header-anchor">#</a> Why should I care?</h3> <p>Thanks to the information from a cache, we can sometimes display to the user what we have already fetched in the past instead of fetching it again. Using proper fetch policy for a given case can magnificently improve experience of your application users. It can also help reduce the amount of requests made to the server.</p> <h3 id="what-are-the-options"><a href="#what-are-the-options" class="header-anchor">#</a> What are the options?</h3> <h4 id="cache-first"><a href="#cache-first" class="header-anchor">#</a> Cache First</h4> <p>When the query becomes active it will check if any response for the same request is present in the cache. If data is available it will be set as result of the query. In other case data will be fetched from API.</p> <h4 id="cache-and-network"><a href="#cache-and-network" class="header-anchor">#</a> Cache And Network</h4> <p>This policy is very similar to &quot;cache first&quot; policy. If there is no such request inside a cache data will be fetched from API. If data is available it will be set as result of the query (like for &quot;cache first&quot; policy) but in addition the request for a fresh data will be made to API. Thanks to that even if the user sees outdated data from cache for a moment, data will be updated a moment later.</p> <h4 id="network-only"><a href="#network-only" class="header-anchor">#</a> Network Only</h4> <p>A query with &quot;network only&quot; policy won't show cached data until a server response arrives. This policy is best for the pages that should never show outdated information.</p> <h4 id="cache-only"><a href="#cache-only" class="header-anchor">#</a> Cache Only</h4> <p>The query with such fetch policy never sends any request to API. Result of the query is always set to current cached response or it has default value if there is no such response.</p> <h4 id="no-cache"><a href="#no-cache" class="header-anchor">#</a> No Cache</h4> <p>This policy is similar to &quot;network only&quot; policy. The difference is that its response is not saved to cache and its value won't be extended or updated by other requests.</p> <h3 id="how-to-use-it"><a href="#how-to-use-it" class="header-anchor">#</a> How to use it?</h3> <p>Setting fetch policy for a query can be done by providing <code>fetchPolicy</code> option. It can be one of the following strings: <code>network-only</code>, <code>cache-and-network</code>, <code>cache-first</code>, <code>cache-only</code>, <code>no-cache</code>.</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code>jsonapi<span class="token operator">:</span> <span class="token punctuation">{</span>
  hello<span class="token operator">:</span> <span class="token punctuation">{</span>
    config<span class="token operator">:</span> <span class="token punctuation">{</span> method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span> url<span class="token operator">:</span> <span class="token string">'/hello'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    fetchPolicy<span class="token operator">:</span> <span class="token string">'cache-first'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="polling"><a href="#polling" class="header-anchor">#</a> Polling</h2> <p>Polling is a mechanism that allows you to keep sync with the server by executing query periodically at a specified interval. To use it simply pass <code>pollInterval</code> option in milliseconds.</p> <h2 id="refetching-data"><a href="#refetching-data" class="header-anchor">#</a> Refetching data</h2> <p>To manually refetch data use <code>refetch</code> method of a query:</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$jsonapi.loading<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Loading...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>{{ animal.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$jsonapi.queries.animal.refetch<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      Get other animal!
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      animal<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  jsonapi<span class="token operator">:</span> <span class="token punctuation">{</span>
    animal<span class="token operator">:</span> <span class="token punctuation">{</span>
      config<span class="token operator">:</span> <span class="token punctuation">{</span> method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span> url<span class="token operator">:</span> <span class="token string">'/random-animal'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="error-handling"><a href="#error-handling" class="header-anchor">#</a> Error handling</h2> <p>Use <code>error</code> option to pass handler for api errors.</p> <div class="language-js extra-class"><pre class="language-js"><code>jsonapi<span class="token operator">:</span> <span class="token punctuation">{</span>
  hello<span class="token operator">:</span> <span class="token punctuation">{</span>
    config<span class="token operator">:</span> <span class="token punctuation">{</span> method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span> url<span class="token operator">:</span> <span class="token string">'/not-existing-url'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">error</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// do something</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="pagination"><a href="#pagination" class="header-anchor">#</a> Pagination</h2> <p>Some of your resources needs to be paginated due to their quantity. You can of course handle it by yourself using <code>variables</code> but JSON:API specification suggest to use special links added to response (<a href="https://jsonapi.org/format/#fetching-pagination" target="_blank" rel="noopener noreferrer">read more<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>). If your api matches this part of the specification you can use <code>fetchMore</code> method of query. If there is <code>next</code> link, data will be fetched and merged with previous responses. Use <code>hasMore</code> property to check if there is next page.</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>animal in animals<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>animal.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ animal.name }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>loading-spinner</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$jsonapi.queries.animals.loading<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
      <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$jsonapi.queries.animals.hasMore<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>$jsonapi.queries.animals.fetchMore<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span>
      load more
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      animals<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  jsonapi<span class="token operator">:</span> <span class="token punctuation">{</span>
    animals<span class="token operator">:</span> <span class="token punctuation">{</span>
      config<span class="token operator">:</span> <span class="token punctuation">{</span> method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span> url<span class="token operator">:</span> <span class="token string">'/animals'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="manual-query"><a href="#manual-query" class="header-anchor">#</a> Manual query</h2> <p>By using <code>$jsonapi</code> helper we can make requests manually:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$jsonapi<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  config<span class="token operator">:</span> <span class="token punctuation">{</span> method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span> url<span class="token operator">:</span> <span class="token string">'/hello'</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="outside-a-component"><a href="#outside-a-component" class="header-anchor">#</a> Outside a component</h2> <p>Documentation will be available soon...</p> <h2 id="advanced-options"><a href="#advanced-options" class="header-anchor">#</a> Advanced options</h2> <h4 id="accessing-raw-response"><a href="#accessing-raw-response" class="header-anchor">#</a> Accessing raw response</h4> <p>Documentation will be available soon...</p> <h4 id="formatting-data"><a href="#formatting-data" class="header-anchor">#</a> Formatting data</h4> <p>Documentation will be available soon...</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vue-jsonapi/guide/basic-usage/" class="prev router-link-active">Introduction</a></span> <span class="next"><a href="/vue-jsonapi/guide/basic-usage/creating-updating-deleting-data.html">Creating, Updating, Deleting Data</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vue-jsonapi/assets/js/app.59b38989.js" defer></script><script src="/vue-jsonapi/assets/js/2.78fe1a10.js" defer></script><script src="/vue-jsonapi/assets/js/13.c407495b.js" defer></script>
  </body>
</html>
